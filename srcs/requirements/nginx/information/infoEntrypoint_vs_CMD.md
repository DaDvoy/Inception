https://habr.com/ru/company/southbridge/blog/329138/ - ENTRYPOINT vs CMD: назад к основам;
https://coderoad.ru/21553353/%D0%92-%D1%87%D0%B5%D0%BC-%D1%80%D0%B0%D0%B7%D0%BD%D0%B8%D1%86%D0%B0-%D0%BC%D0%B5%D0%B6%D0%B4%D1%83-CMD-%D0%B8-ENTRYPOINT-%D0%B2-Dockerfile - разница между entrypoint и CMD;

Используйте **ENTRYPOINT**, если вы не хотите, чтобы разработчики изменяли исполняемый файл, который запускается при запуске контейнера. Вы можете представлять, что ваш контейнер – исполняемая оболочка. Хорошей стратегией будет определить стабильную комбинацию параметров и исполняемого файла как ENTRYPOINT. Для нее вы можете (не обязательно) указать аргументы **CMD** по умолчанию, доступные другим разработчикам для переопределения.


$ cat Dockerfile
FROM alpine  
ENTRYPOINT ["ping"]  
CMD ["www.google.com"]  

$ docker build -t test .

Запуск с параметрами по умолчанию:


$ docker run test
PING www.google.com (172.217.7.164): 56 data bytes  
64 bytes from 172.217.7.164: seq=0 ttl=37 time=0.306 ms

*Разница между entrypoint и CMD:*

ENTRYPOINT указывает команду, которая всегда будет выполняться при запуске контейнера.

CMD указывает аргументы, которые будут переданы в ENTRYPOINT .

Если вы хотите создать изображение, посвященное определенной команде, вы будете использовать ENTRYPOINT ["/path/dedicated_command"]

В противном случае, если вы хотите создать изображение общего назначения, вы можете оставить ENTRYPOINT неопределенным и использовать CMD ["/path/dedicated_command"] , поскольку вы сможете переопределить параметр, предоставив аргументы docker run .



*Переопределение CMD собственными параметрами:*


$ docker run test www.yahoo.com
PING www.yahoo.com (98.139.183.24): 56 data bytes  
64 bytes from 98.139.183.24: seq=0 ttl=37 time=0.590 ms  

Используйте только CMD (без определения ENTRYPOINT), если требуется, чтобы разработчики могли легко переопределять исполняемый файл. Если точка входа определена, исполняемый файл все равно можно переопределить, используя флаг --entrypoint. Но для разработчиков будет гораздо удобнее добавлять желаемую команду в конце строки docker run.


$ cat Dockerfile
FROM alpine  
CMD ["ping", "www.google.com"]  

$ docker build -t test .

Ping – это хорошо, но давайте попробуем запустить контейнер с оболочкой вместо команды ping.


$ docker run -it test sh
/ # ps
PID   USER     TIME   COMMAND  
    1 root       0:00 sh
    7 root       0:00 ps
/ # 

Я предпочитаю по большей части этот метод, потому что он дает разработчикам свободу легко переопределять исполняемый файл оболочкой или другим исполняемым файлом.


*Переопределение*

Инструкции ENTRYPOINT и CMD могут быть переопределены с помощью флагов командной строки.

Флаг --entrypoint может быть использован, чтобы переопределить инструкцию ENTRYPOINT:

`docker run --entrypoint [my_entrypoint] test`

Все, что следует после названия образа в команде docker run, переопределяет инструкцию CMD:

`docker run test [command 1] [arg1] [arg2]`